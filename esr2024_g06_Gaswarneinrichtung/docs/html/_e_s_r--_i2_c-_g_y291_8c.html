<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gaswarneinrichtung: C:/Users/Fabian/OneDrive/Dokumente/4. Semester/Embedded Systems/Projekt/esr2024_g06_Gaswarneinrichtung/esr2024_g06_Gaswarneinrichtung/src/class/ESR--I2C-GY291.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gaswarneinrichtung
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_6ddc554cda5704a54b4cf197aaaaa198.html">class</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">ESR--I2C-GY291.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Project main-file: Requesting multiple data from ADXL345 acceleration sensor.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;driverlib.h&quot;</code><br />
<code>#include &quot;Board.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsensor_data__t.html">sensorData_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae2f0ff6faf548539a21b93a034e278e8" id="r_ae2f0ff6faf548539a21b93a034e278e8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae2f0ff6faf548539a21b93a034e278e8">SLAVE_ADDRESS</a>&#160;&#160;&#160;0x53</td></tr>
<tr class="separator:ae2f0ff6faf548539a21b93a034e278e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb16bfdd33b9d2ea4f8d121f54e3e6b8" id="r_abb16bfdd33b9d2ea4f8d121f54e3e6b8"><td class="memItemLeft" align="right" valign="top"><a id="abb16bfdd33b9d2ea4f8d121f54e3e6b8" name="abb16bfdd33b9d2ea4f8d121f54e3e6b8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CS_SMCLK_DESIRED_FREQUENCY_IN_KHZ</b>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:abb16bfdd33b9d2ea4f8d121f54e3e6b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadaa11d9acd1cd658f32638079eafed6" id="r_aadaa11d9acd1cd658f32638079eafed6"><td class="memItemLeft" align="right" valign="top"><a id="aadaa11d9acd1cd658f32638079eafed6" name="aadaa11d9acd1cd658f32638079eafed6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CS_SMCLK_FLLREF_RATIO</b>&#160;&#160;&#160;30</td></tr>
<tr class="separator:aadaa11d9acd1cd658f32638079eafed6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a74629e9d185ce9f03694dc7fec491426" id="r_a74629e9d185ce9f03694dc7fec491426"><td class="memItemLeft" align="right" valign="top"><a id="a74629e9d185ce9f03694dc7fec491426" name="a74629e9d185ce9f03694dc7fec491426"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>InitMSP430Peripherals</b> (void)</td></tr>
<tr class="separator:a74629e9d185ce9f03694dc7fec491426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6434978f143ab5df2078aa566f8b471d" id="r_a6434978f143ab5df2078aa566f8b471d"><td class="memItemLeft" align="right" valign="top"><a id="a6434978f143ab5df2078aa566f8b471d" name="a6434978f143ab5df2078aa566f8b471d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>EUSCI_B_I2C_masterSetByteCnt</b> (uint16_t baseAddress, uint16_t cnt)</td></tr>
<tr class="separator:a6434978f143ab5df2078aa566f8b471d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e079a344043d62a2070aaea81c7ba95" id="r_a7e079a344043d62a2070aaea81c7ba95"><td class="memItemLeft" align="right" valign="top"><a id="a7e079a344043d62a2070aaea81c7ba95" name="a7e079a344043d62a2070aaea81c7ba95"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>gy291_main</b> (void)</td></tr>
<tr class="separator:a7e079a344043d62a2070aaea81c7ba95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a600430c0372d4ed0b67dfd6cb63d4560" id="r_a600430c0372d4ed0b67dfd6cb63d4560"><td class="memItemLeft" align="right" valign="top"><a id="a600430c0372d4ed0b67dfd6cb63d4560" name="a600430c0372d4ed0b67dfd6cb63d4560"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>USCIB0_ISR</b> (void)</td></tr>
<tr class="separator:a600430c0372d4ed0b67dfd6cb63d4560"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af8e307cff800aa2b078247099ea0556d" id="r_af8e307cff800aa2b078247099ea0556d"><td class="memItemLeft" align="right" valign="top"><a id="af8e307cff800aa2b078247099ea0556d" name="af8e307cff800aa2b078247099ea0556d"></a>
<a class="el" href="structsensor_data__t.html">sensorData_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>gi_sensorData</b></td></tr>
<tr class="separator:af8e307cff800aa2b078247099ea0556d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd201cffe1be34905473abdd055f597f" id="r_acd201cffe1be34905473abdd055f597f"><td class="memItemLeft" align="right" valign="top"><a id="acd201cffe1be34905473abdd055f597f" name="acd201cffe1be34905473abdd055f597f"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><b>gp_rxData</b></td></tr>
<tr class="separator:acd201cffe1be34905473abdd055f597f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b9d9b35a456a80a76a03f10144386e6" id="r_a6b9d9b35a456a80a76a03f10144386e6"><td class="memItemLeft" align="right" valign="top"><a id="a6b9d9b35a456a80a76a03f10144386e6" name="a6b9d9b35a456a80a76a03f10144386e6"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>txArr</b> [32]</td></tr>
<tr class="separator:a6b9d9b35a456a80a76a03f10144386e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a502fcbcd0d6cf1e897195543ad2a5b2a" id="r_a502fcbcd0d6cf1e897195543ad2a5b2a"><td class="memItemLeft" align="right" valign="top"><a id="a502fcbcd0d6cf1e897195543ad2a5b2a" name="a502fcbcd0d6cf1e897195543ad2a5b2a"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><b>gp_txData</b></td></tr>
<tr class="separator:a502fcbcd0d6cf1e897195543ad2a5b2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1b1fbaa6eeefdd077a0f7f327c3dfcc" id="r_ae1b1fbaa6eeefdd077a0f7f327c3dfcc"><td class="memItemLeft" align="right" valign="top"><a id="ae1b1fbaa6eeefdd077a0f7f327c3dfcc" name="ae1b1fbaa6eeefdd077a0f7f327c3dfcc"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>rxcounter</b> = 0</td></tr>
<tr class="separator:ae1b1fbaa6eeefdd077a0f7f327c3dfcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Project main-file: Requesting multiple data from ADXL345 acceleration sensor. </p>
<dl class="section author"><dt>Author</dt><dd>Sven Steddin </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2019-06-18</dd></dl>
<p>This project has been derived from TI sample code projects MSP430ware v:3.80.07.00 (2019-06-15):</p><ul>
<li>eusci_b_i2c_ex3_masterTxMultiple</li>
<li>eusci_b_i2c_ex1_masterRxMultiple </li>
</ul>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae2f0ff6faf548539a21b93a034e278e8" name="ae2f0ff6faf548539a21b93a034e278e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2f0ff6faf548539a21b93a034e278e8">&#9670;&#160;</a></span>SLAVE_ADDRESS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SLAVE_ADDRESS&#160;&#160;&#160;0x53</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This example shows how to configure the I2C module as a master for multiple byte transmission and reception in order to configure control registers and to read sensor data of a ADXL345 acceleration sensor on a GY291 sensor board.</p>
<p>The example has been modified to run an a MSP430FR2355 Launchpad. The example uses Ti Driverlib functions, which is supplemented by a function to make use of the transmission byte counter of the MSP430FR2355</p>
<p>Purpose:</p><ul>
<li>Modify control registers of ADXL345 in order to switch it from standby to measurement mode (see datasheet)</li>
<li>Repeatedly read samples of sensory data in x-, y- and z-direction</li>
</ul>
<p>Intended use:</p><ol type="1">
<li>Connect ADXL sensor board to MSP430FR2355 according to the diagram below</li>
<li>Read sensor data from array sensorData in debug mode</li>
</ol>
<p>Description: The USCI_B0 unit is used to read and write data to an I2C slave in interrupt mode. The byte counter function of the USCI_B0 is used to generate a stop condition. The byte counter is loaded prior to the start of the transmission and decremented automatically on each byte which is sent or received. Write and read operations are implemented by interrupt service routines.</p>
<p>Pullup-resistors are already installed on the sensor board GY291, thus no external pullup resistors are required. The Launchpad drives the GY291 power supply I2C-Address of GY291: 0x53 ACLK = n/a, MCLK = SMCLK = BRCLK = DCO = ~1MHz </p><pre class="fragment">                           /|\  /|\
          MSP430FR2355     4,7k 4,7k  GY291 - ADXL345
          Launchpad         |    |    sensorboard
        -----------------   |    |   ------------
       |     P1.2/UCB0SDA|&lt;-|----+-&gt;|SDA         |
       |                 |  |       |            |
       |                 |  |       |            |
       |     P1.3/UCB0SCL|&lt;-+------&gt;|SCL         |
       |                 |          |            |
       |                 |          |            |
       |             Vcc |---------&gt;|Vcc (3,3V)  |
       |             GND |---------&gt;|GND         |
</pre><p> Warning: Example program only covers the happy path of coding; no error cases are regarded</p>
<p>written by S. Steddin (2019-06-18) </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
